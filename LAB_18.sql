---------------------------------------------------------------------------------
-- PART A --
---------------------------------------------------------------------------------
CREATE TABLE STU_MASTER
(
	ST_RNO INT PRIMARY KEY,
	ST_NAME NVARCHAR(100),
	-- PROVIDE DEFAULT VALUE 'GENERAL' --
	ST_BRANCH VARCHAR(20) DEFAULT 'GENERAL',
	-- DO NOT ALLOW SPI MORE THEN 10 --
	ST_SPI DECIMAL (4,2) CHECK (ST_SPI<=10.00),
	-- DO NOT ALLOW BKLOG LESS THEN 0 --
	ST_BKLOG INT CHECK (ST_BKLOG>=0)
)

INSERT INTO STU_MASTER VALUES
(101,'RAJU','CE',8.80,0),
(102,'AMIT','EE',2.20,3),
(103,'SANJAY','ME',1.50,6),
(104,'NEHA','EC',7.65,0),
(105,'MEERA','EE',5.52,2)


INSERT INTO STU_MASTER (ST_RNO , ST_NAME , ST_SPI , ST_BKLOG)
VALUES
(106,'MAHESH',4.50,3)

SELECT * FROM STU_MASTER

---------------------------------------------------------------------------------
-- PART B --
---------------------------------------------------------------------------------
CREATE TABLE EMP_DETAILS
(
	-- PRIMARY KEY CONSTRAINT --
	E_ID INT PRIMARY KEY,
	-- DEFAULT CONSTRAINT --
	E_NAME NVARCHAR(100) DEFAULT 'USER',
	-- FOREIGN KEY CONSTRAINT --
	D_ID INT FOREIGN KEY REFERENCES DEPT_DETAILS(D_ID),
	-- FOREIGN KEY CONSTRAINT --
	C_ID INT FOREIGN KEY REFERENCES CITY_DETAILS(C_ID),
	--- SALARY GREATER THEN 0 --
	E_SALARY DECIMAL (10,2) CHECK (E_SALARY>0),
	--- EXPERIANCE GREATER THEN OR EQUAL TO 0 --
	E_EXPERIANCE INT CHECK (E_EXPERIANCE >=0),
)

CREATE TABLE DEPT_DETAILS
(
	-- PRIMARY KEY CONSTRAINT --
	D_ID INT PRIMARY KEY,
	-- NOT NULL --
	D_NAME NVARCHAR(100) NOT NULL,
)

CREATE TABLE CITY_DETAILS
(
	-- PRIMARY KEY CONSTRAINT --
	C_ID INT PRIMARY KEY,
	-- NOT NULL --
	C_NAME NVARCHAR(100) NOT NULL,
)
---------------------------------------------------------------------------------
--PART :: C
---------------------------------------------------------------------------------
--1.
CREATE TABLE EMP_INFO
(
	EID INT PRIMARY KEY,
	ENAME VARCHAR(100) NOT NULL,
	DID INT FOREIGN KEY REFERENCES DEPT_INFO(DID),
	CID INT FOREIGN KEY REFERENCES CITY_INFO(CID),
	SALARY DECIMAL(8,2),
	EXPERIENCE INT
)
CREATE TABLE DEPT_INFO
(
	DID INT PRIMARY KEY,
	DNAME VARCHAR(50) NOT NULL
)
CREATE TABLE CITY_INFO
(
	CID INT PRIMARY KEY,
	CNAME VARCHAR(50) NOT NULL,
	DID INT FOREIGN KEY REFERENCES DISTRICT(DID)
)
CREATE TABLE DISTRICT
(
	DID INT PRIMARY KEY,
	DNAME VARCHAR(50) NOT NULL,
	SID INT FOREIGN KEY REFERENCES STATE(SID)
)
CREATE TABLE STATE
(
	SID INT PRIMARY KEY,
	SNAME VARCHAR(50) NOT NULL,
	CID INT FOREIGN KEY REFERENCES COUNTRY(CID)
)
CREATE TABLE COUNTRY
(
	CID INT PRIMARY KEY,
	CNAME VARCHAR(50) NOT NULL
)
--2.
INSERT INTO COUNTRY
VALUES
(1,'INDIA'),
(2,'JAPAN'),
(3,'EUROPE'),
(4,'ENGLAND'),
(5,'SOUTH AFRICA')
SELECT * FROM COUNTRY
INSERT INTO STATE
VALUES
(01,'GUJARAT',1),
(02,'RAJASTHAN',1),
(03,'TOKYO',2),
(04,'KYOTO',2),
(05,'LONDON',4)
SELECT * FROM STATE
INSERT INTO DISTRICT
VALUES
(101,'RAJKOT',1),
(102,'JAIPUR',2),
(103,'SHIBUYA',3),
(104,'AHMEDABAD',1),
(105,'SHINJUKU',3)
SELECT * FROM DISTRICT
INSERT INTO CITY_INFO
VALUES
(101,'RAJKOT',101),
(102,'AHMEDABAD',104),
(103,'MITAKA',103),
(104,'GONDAL',101),
(105,'JAIPUR',102)
SELECT * FROM CITY_INFO
INSERT INTO DEPT_INFO
VALUES
(1,'ADMIN'),
(2,'HR'),
(3,'IT'),
(4,'MANAGEMENT'),
(5,'SECURITY')
SELECT * FROM DEPT_INFO
INSERT INTO EMP_INFO
VALUES
(1001,'RAJ',1,102,50000.00,5),
(1002,'PRUTHIL',3,101,40000.00,7),
(1003,'BHOOMI',4,104,20000.00,3),
(1004,'ASHOK',5,103,10000.00,4),
(1005,'MIRAL',3,101,40000.00,6)
SELECT * FROM EMP_INFO
--3.
SELECT EMP.ENAME , DEPT.DNAME , EMP.SALARY , EMP.EXPERIENCE , CITY.CNAME , DIS.DNAME , STA.SNAME , COU.CNAME FROM 
EMP_INFO EMP JOIN DEPT_INFO DEPT ON EMP.DID = DEPT.DID 
JOIN CITY_INFO CITY ON EMP.CID = CITY.CID
JOIN DISTRICT DIS ON CITY.DID = DIS.DID
JOIN STATE STA ON DIS.SID = STA.SID
JOIN COUNTRY COU ON STA.CID = COU.CID
